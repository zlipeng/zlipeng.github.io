---
layout: post
title:  利用jenkins搭建持续集成系统
date:   2016-12-09 18:13:35 +0800
categories: Continuous-Integration
---
前两天老大和我说我们把持续集成用在以后的开发上，一方面是提高效率，另一方面是提高质量。

由于工作年限较短，还没有真正接触过大项目，所以也还没用到过持续集成。。但是仅仅看介绍就会觉得这个东西还是很值得一试的。

持续集成系统有很多，我们选择了[jenkins](https://jenkins.io)，它是开源的，且足够强大。

## 安装

首先要去官网下载jenkins.war包，下载完成后可在本地进行安装测试。只需要执行以下命令即可：

    java -jar jenkins.war

当然，前提是你的电脑要配置好了jdk。执行以上命令后，它会在当前用户的目录下创建`.jenkins`目录，配置信息，数据库等都存放在里面。接下来，只需要在浏览器中打开`http://localhost:8080`就可以进行安装了。

jenkins默认启动在8080端口，如果端口被占用，则在执行命令时使用 `--httpPort=xxxx`即可。

接下来便是安装plugin，设置admin用户，然后就可以进入系统了。

## 服务器构建

团队中使用持续集成当然不可能每个人都在自己电脑上装一个jenkins了，这时候就需要把它跑在服务器上。

服务器上的配置也很简单，和本地基本类似。最重要的问题是要保持jenkins持续在线，因为plugin的安装等经常需要重启jenkins服务，我们不可能每次都要进服务器跑一遍命令。

在后台跑一个服务的实现方式有很多种，也有很多工具可以帮助我们来实现。开始我打算使用supervisor来帮助我实现，因为不太会写shell，后来在老大帮助下用shell将jenkins直接变成一个服务。这样，每次启动，关闭，重启只需要`service jenkins start|stop|restart`，着实方便了许多。

接下来，我会继续负责持续集成系统方面的事情，还有很多值得探索的地方。

预感，会很好玩！
